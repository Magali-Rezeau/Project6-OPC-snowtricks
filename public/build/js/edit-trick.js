(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["js/edit-trick"],{

/***/ "./assets/js/edit-trick.js":
/*!*********************************!*\
  !*** ./assets/js/edit-trick.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! core-js/modules/es.array.for-each */ "./node_modules/core-js/modules/es.array.for-each.js");

__webpack_require__(/*! core-js/modules/es.regexp.exec */ "./node_modules/core-js/modules/es.regexp.exec.js");

__webpack_require__(/*! core-js/modules/es.string.replace */ "./node_modules/core-js/modules/es.string.replace.js");

__webpack_require__(/*! core-js/modules/web.dom-collections.for-each */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");

(function () {
  var containerPicture = document.getElementById('trick_pictures');
  var containerVideo = document.getElementById('trick_videos');
  var indexPicture = containerPicture.querySelectorAll('.edit-trick-content-form-row').length;
  var indexVideo = containerVideo.querySelectorAll('.edit-trick-content-form-row').length;

  if (indexPicture == 0) {
    addPictureForm(containerPicture);
  }

  if (indexVideo == 0) {
    addVideoForm(containerVideo);
  }

  var createModalPicture = function createModalPicture() {
    var btn = '<button type="button" class="js-modal-close">X</button>';
    var formRow = containerPicture.querySelectorAll('.edit-trick-content-form-row');
    var elModal = document.querySelectorAll('.js-modal-picture');
    var modalWrapper = containerPicture.querySelectorAll('.modal-none');

    for (var i = 0; i < formRow.length; i++) {
      formRow[i].classList.add('modal');
      formRow[i].setAttribute("id", "modal-picture-" + i);
      formRow[i].setAttribute("aria-hidden", "true");
      formRow[i].setAttribute("role", "dialog");
      formRow[i].setAttribute("aria-modal", "false");
    }

    for (var _i = 0; _i < modalWrapper.length; _i++) {
      modalWrapper[_i].insertAdjacentHTML('afterbegin', btn);

      modalWrapper[_i].className = 'modal-wrapper js-modal-stop';
    }

    for (var _i2 = 0; _i2 < elModal.length; _i2++) {
      elModal[_i2].setAttribute("href", "#modal-picture-" + _i2);
    }
  };

  var createModalVideo = function createModalVideo() {
    var btn = '<button type="button" class="js-modal-close">X</button>';
    var formRow = containerVideo.querySelectorAll('.edit-trick-content-form-row');
    var elModal = document.querySelectorAll('.js-modal-video');
    var modalWrapper = containerVideo.querySelectorAll('.modal-none');

    for (var i = 0; i < formRow.length; i++) {
      formRow[i].classList.add('modal');
      formRow[i].setAttribute("id", "modal-video-" + i);
      formRow[i].setAttribute("aria-hidden", "true");
      formRow[i].setAttribute("role", "dialog");
      formRow[i].setAttribute("aria-modal", "false");
    }

    for (var _i3 = 0; _i3 < modalWrapper.length; _i3++) {
      modalWrapper[_i3].insertAdjacentHTML('afterbegin', btn);

      modalWrapper[_i3].className = 'modal-wrapper js-modal-stop';
    }

    for (var _i4 = 0; _i4 < elModal.length; _i4++) {
      elModal[_i4].setAttribute("href", "#modal-video-" + _i4);
    }
  };

  createModalPicture();
  createModalVideo();
  document.querySelector('.btn-add-picture').addEventListener('click', function (event) {
    event.preventDefault();
    addPictureForm(containerPicture);
  });
  document.querySelector('.btn-add-video').addEventListener('click', function (event) {
    event.preventDefault();
    addVideoForm(containerVideo);
  });

  function addRemoveBtn() {
    document.querySelectorAll('button.btn-delete-picture.fas.fa-trash-alt').forEach(function (element) {
      element.addEventListener('click', function (event) {
        event.preventDefault();
        this.parentNode.parentNode.remove();
      });
    });
    document.querySelectorAll('button.btn-delete-video.fas.fa-trash-alt').forEach(function (element) {
      element.addEventListener('click', function (event) {
        event.preventDefault();
        this.parentNode.parentNode.remove();
      });
    });
  }

  function addPictureForm(containerPicture) {
    var prototypePicture = containerPicture.getAttribute('data-prototype');
    var templatePicture = prototypePicture.replace(/__name__/g, indexPicture);
    containerPicture.insertAdjacentHTML('beforeend', templatePicture);
    indexPicture++;
    addRemoveBtn();
  }

  function addVideoForm(containerVideo) {
    var prototypeVideo = containerVideo.getAttribute('data-prototype');
    var templateVideo = prototypeVideo.replace(/__name__/g, indexVideo);
    containerVideo.insertAdjacentHTML('beforeend', templateVideo);
    indexVideo++;
    addRemoveBtn();
  }

  var modal = null;

  var openModal = function openModal(event) {
    event.preventDefault();
    var target = document.querySelector(event.target.getAttribute("href"));
    target.querySelector('.fas.fa-trash-alt').style.display = "none";
    target.style.display = "block";
    target.removeAttribute("aria-hidden");
    target.setAttribute("aria-modal", "true");
    modal = target;
    modal.addEventListener('click', closeModal);
    modal.querySelector('.js-modal-close').addEventListener('click', closeModal);
    modal.querySelector('.js-modal-stop').addEventListener('click', stopPropagation);
  };

  var closeModal = function closeModal(event) {
    if (modal === null) {
      return;
    }

    event.preventDefault();
    modal.style.display = "none";
    modal.setAttribute("aria-hidden", "true");
    modal.removeAttribute("aria-modal");
    modal.removeEventListener('click', closeModal);
    modal.querySelector('.js-modal-close').removeEventListener('click', closeModal);
    modal.querySelector('.js-modal-stop').removeEventListener('click', stopPropagation);
    modal = null;
  };

  var stopPropagation = function stopPropagation(event) {
    event.stopPropagation();
  };

  document.querySelectorAll('.js-modal-picture').forEach(function (a) {
    a.addEventListener('click', openModal);
  });
  document.querySelectorAll('.js-modal-video').forEach(function (a) {
    a.addEventListener('click', openModal);
  });
  var btnDeletePicture = document.querySelectorAll('.btn-delete-picture.fas.fa-trash-alt');

  for (var i = 0; i < btnDeletePicture.length; i++) {
    btnDeletePicture[i].setAttribute("href", "#modal-picture-" + i);
  }

  var btnDeleteVideo = document.querySelectorAll('.btn-delete-video.fas.fa-trash-alt');

  for (var _i5 = 0; _i5 < btnDeleteVideo.length; _i5++) {
    btnDeleteVideo[_i5].setAttribute("href", "#modal-video-" + _i5);
  }

  btnDeleteVideo.forEach(function (element) {
    element.addEventListener('click', function (event) {
      var target = document.querySelector(event.target.getAttribute("href"));
      event.preventDefault();

      if (target) {
        target.remove();
      }

      this.parentNode.parentNode.remove();
    });
  });
  btnDeletePicture.forEach(function (element) {
    element.addEventListener('click', function (event) {
      var target = document.querySelector(event.target.getAttribute("href"));
      event.preventDefault();

      if (target) {
        target.remove();
      }

      this.parentNode.parentNode.remove();
    });
  });
})();

/***/ })

},[["./assets/js/edit-trick.js","runtime","vendors~js/add-trick~js/edit-trick"]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvZWRpdC10cmljay5qcyJdLCJuYW1lcyI6WyJjb250YWluZXJQaWN0dXJlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRhaW5lclZpZGVvIiwiaW5kZXhQaWN0dXJlIiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImluZGV4VmlkZW8iLCJhZGRQaWN0dXJlRm9ybSIsImFkZFZpZGVvRm9ybSIsImNyZWF0ZU1vZGFsUGljdHVyZSIsImJ0biIsImZvcm1Sb3ciLCJlbE1vZGFsIiwibW9kYWxXcmFwcGVyIiwiaSIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImluc2VydEFkamFjZW50SFRNTCIsImNsYXNzTmFtZSIsImNyZWF0ZU1vZGFsVmlkZW8iLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJhZGRSZW1vdmVCdG4iLCJmb3JFYWNoIiwiZWxlbWVudCIsInBhcmVudE5vZGUiLCJyZW1vdmUiLCJwcm90b3R5cGVQaWN0dXJlIiwiZ2V0QXR0cmlidXRlIiwidGVtcGxhdGVQaWN0dXJlIiwicmVwbGFjZSIsInByb3RvdHlwZVZpZGVvIiwidGVtcGxhdGVWaWRlbyIsIm1vZGFsIiwib3Blbk1vZGFsIiwidGFyZ2V0Iiwic3R5bGUiLCJkaXNwbGF5IiwicmVtb3ZlQXR0cmlidXRlIiwiY2xvc2VNb2RhbCIsInN0b3BQcm9wYWdhdGlvbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhIiwiYnRuRGVsZXRlUGljdHVyZSIsImJ0bkRlbGV0ZVZpZGVvIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLENBQUMsWUFBWTtBQUNULE1BQU1BLGdCQUFnQixHQUFHQyxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsZ0JBQXhCLENBQXpCO0FBQ0EsTUFBTUMsY0FBYyxHQUFHRixRQUFRLENBQUNDLGNBQVQsQ0FBd0IsY0FBeEIs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QVFILEdBVEQ7QUFZSCxDQXhLRCxJIiwiZmlsZSI6ImpzL2VkaXQtdHJpY2suanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lclBpY3R1cmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJpY2tfcGljdHVyZXMnKTtcbiAgICBjb25zdCBjb250YWluZXJWaWRlbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cmlja192aWRlb3MnKTtcblxuICAgIGxldCBpbmRleFBpY3R1cmUgPSBjb250YWluZXJQaWN0dXJlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0LXRyaWNrLWNvbnRlbnQtZm9ybS1yb3cnKS5sZW5ndGg7XG4gICAgbGV0IGluZGV4VmlkZW8gPSBjb250YWluZXJWaWRlby5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdC10cmljay1jb250ZW50LWZvcm0tcm93JykubGVuZ3RoO1xuXG4gICAgaWYgKGluZGV4UGljdHVyZSA9PSAwKSB7XG4gICAgICAgIGFkZFBpY3R1cmVGb3JtKGNvbnRhaW5lclBpY3R1cmUpO1xuICAgIH1cbiAgICBpZiAoaW5kZXhWaWRlbyA9PSAwKSB7XG4gICAgICAgIGFkZFZpZGVvRm9ybShjb250YWluZXJWaWRlbyk7XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZU1vZGFsUGljdHVyZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCBidG4gPSAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJqcy1tb2RhbC1jbG9zZVwiPlg8L2J1dHRvbj4nO1xuICAgICAgICBjb25zdCBmb3JtUm93ID0gY29udGFpbmVyUGljdHVyZS5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdC10cmljay1jb250ZW50LWZvcm0tcm93Jyk7XG4gICAgICAgIGNvbnN0IGVsTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtbW9kYWwtcGljdHVyZScpO1xuICAgICAgICBjb25zdCBtb2RhbFdyYXBwZXIgPSBjb250YWluZXJQaWN0dXJlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbC1ub25lJyk7XG4gICAgICAgXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybVJvdy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9ybVJvd1tpXS5jbGFzc0xpc3QuYWRkKCdtb2RhbCcpO1xuICAgICAgICAgICAgZm9ybVJvd1tpXS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm1vZGFsLXBpY3R1cmUtXCIgKyBpKTtcbiAgICAgICAgICAgIGZvcm1Sb3dbaV0uc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgZm9ybVJvd1tpXS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiZGlhbG9nXCIpO1xuICAgICAgICAgICAgZm9ybVJvd1tpXS5zZXRBdHRyaWJ1dGUoXCJhcmlhLW1vZGFsXCIsIFwiZmFsc2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtb2RhbFdyYXBwZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG1vZGFsV3JhcHBlcltpXS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBidG4pO1xuICAgICAgICAgICAgbW9kYWxXcmFwcGVyW2ldLmNsYXNzTmFtZSA9ICdtb2RhbC13cmFwcGVyIGpzLW1vZGFsLXN0b3AnO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxNb2RhbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZWxNb2RhbFtpXS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIFwiI21vZGFsLXBpY3R1cmUtXCIgKyBpKTtcbiAgICAgICAgfVxuICAgICAgXG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZU1vZGFsVmlkZW8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgYnRuID0gJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwianMtbW9kYWwtY2xvc2VcIj5YPC9idXR0b24+JztcbiAgICAgICAgY29uc3QgZm9ybVJvdyA9IGNvbnRhaW5lclZpZGVvLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0LXRyaWNrLWNvbnRlbnQtZm9ybS1yb3cnKTtcbiAgICAgICAgY29uc3QgZWxNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1tb2RhbC12aWRlbycpO1xuICAgICAgICBjb25zdCBtb2RhbFdyYXBwZXIgPSBjb250YWluZXJWaWRlby5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwtbm9uZScpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybVJvdy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9ybVJvd1tpXS5jbGFzc0xpc3QuYWRkKCdtb2RhbCcpO1xuICAgICAgICAgICAgZm9ybVJvd1tpXS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm1vZGFsLXZpZGVvLVwiICsgaSk7XG4gICAgICAgICAgICBmb3JtUm93W2ldLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgIGZvcm1Sb3dbaV0uc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImRpYWxvZ1wiKTtcbiAgICAgICAgICAgIGZvcm1Sb3dbaV0uc2V0QXR0cmlidXRlKFwiYXJpYS1tb2RhbFwiLCBcImZhbHNlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kYWxXcmFwcGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBtb2RhbFdyYXBwZXJbaV0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgYnRuKTtcbiAgICAgICAgICAgIG1vZGFsV3JhcHBlcltpXS5jbGFzc05hbWUgPSAnbW9kYWwtd3JhcHBlciBqcy1tb2RhbC1zdG9wJztcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsTW9kYWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGVsTW9kYWxbaV0uc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBcIiNtb2RhbC12aWRlby1cIiArIGkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBjcmVhdGVNb2RhbFBpY3R1cmUoKTtcbiAgICBjcmVhdGVNb2RhbFZpZGVvKCk7XG4gICAgXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1hZGQtcGljdHVyZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGFkZFBpY3R1cmVGb3JtKGNvbnRhaW5lclBpY3R1cmUpO1xuICAgIH0pXG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLWFkZC12aWRlbycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGFkZFZpZGVvRm9ybShjb250YWluZXJWaWRlbyk7XG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGFkZFJlbW92ZUJ0bigpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uLmJ0bi1kZWxldGUtcGljdHVyZS5mYXMuZmEtdHJhc2gtYWx0JykuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbi5idG4tZGVsZXRlLXZpZGVvLmZhcy5mYS10cmFzaC1hbHQnKS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkUGljdHVyZUZvcm0oY29udGFpbmVyUGljdHVyZSkge1xuICAgICAgICBjb25zdCBwcm90b3R5cGVQaWN0dXJlID0gY29udGFpbmVyUGljdHVyZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvdG90eXBlJyk7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlUGljdHVyZSA9IHByb3RvdHlwZVBpY3R1cmUucmVwbGFjZSgvX19uYW1lX18vZywgaW5kZXhQaWN0dXJlKTtcbiAgICAgICAgY29udGFpbmVyUGljdHVyZS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHRlbXBsYXRlUGljdHVyZSk7XG4gICAgICAgIGluZGV4UGljdHVyZSsrO1xuICAgICAgICBhZGRSZW1vdmVCdG4oKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRWaWRlb0Zvcm0oY29udGFpbmVyVmlkZW8pIHtcbiAgICAgICAgY29uc3QgcHJvdG90eXBlVmlkZW8gPSBjb250YWluZXJWaWRlby5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvdG90eXBlJyk7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlVmlkZW8gPSBwcm90b3R5cGVWaWRlby5yZXBsYWNlKC9fX25hbWVfXy9nLCBpbmRleFZpZGVvKTtcbiAgICAgICAgY29udGFpbmVyVmlkZW8uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCB0ZW1wbGF0ZVZpZGVvKTtcbiAgICAgICAgaW5kZXhWaWRlbysrO1xuICAgICAgICBhZGRSZW1vdmVCdG4oKTtcbiAgICB9XG5cbiAgICBsZXQgbW9kYWwgPSBudWxsO1xuICAgIGNvbnN0IG9wZW5Nb2RhbCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGxldCB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpKTtcbiAgICAgICAgdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5mYXMuZmEtdHJhc2gtYWx0Jykuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB0YXJnZXQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIpO1xuICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKFwiYXJpYS1tb2RhbFwiLCBcInRydWVcIik7XG4gICAgICAgIG1vZGFsID0gdGFyZ2V0O1xuICAgICAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWwpO1xuICAgICAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuanMtbW9kYWwtY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWwpO1xuICAgICAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuanMtbW9kYWwtc3RvcCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RvcFByb3BhZ2F0aW9uKTtcbiAgICB9XG4gICAgY29uc3QgY2xvc2VNb2RhbCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAobW9kYWwgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgbW9kYWwuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICBtb2RhbC5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLW1vZGFsXCIpO1xuICAgICAgICBtb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWwpO1xuICAgICAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuanMtbW9kYWwtY2xvc2UnKS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWwpO1xuICAgICAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuanMtbW9kYWwtc3RvcCcpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RvcFByb3BhZ2F0aW9uKTtcbiAgICAgICAgbW9kYWwgPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCBzdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1tb2RhbC1waWN0dXJlJykuZm9yRWFjaChhID0+IHtcbiAgICAgICAgYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Nb2RhbCk7IFxuICAgIH0pXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLW1vZGFsLXZpZGVvJykuZm9yRWFjaChhID0+IHtcbiAgICAgICAgYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Nb2RhbCk7XG4gICAgfSlcbiAgICBjb25zdCBidG5EZWxldGVQaWN0dXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ0bi1kZWxldGUtcGljdHVyZS5mYXMuZmEtdHJhc2gtYWx0Jyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidG5EZWxldGVQaWN0dXJlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJ0bkRlbGV0ZVBpY3R1cmVbaV0uc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBcIiNtb2RhbC1waWN0dXJlLVwiICsgaSk7XG4gICAgfVxuICAgIGNvbnN0IGJ0bkRlbGV0ZVZpZGVvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ0bi1kZWxldGUtdmlkZW8uZmFzLmZhLXRyYXNoLWFsdCcpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnRuRGVsZXRlVmlkZW8ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYnRuRGVsZXRlVmlkZW9baV0uc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBcIiNtb2RhbC12aWRlby1cIiArIGkpO1xuICAgIH1cbiAgIFxuICAgIGJ0bkRlbGV0ZVZpZGVvLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgbGV0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIikpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZSgpO1xuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBidG5EZWxldGVQaWN0dXJlLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgbGV0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIikpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZSgpO1xuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBcbn0pKClcbiJdLCJzb3VyY2VSb290IjoiIn0=